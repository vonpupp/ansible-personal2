---
- name: Add Google Chrome key
  shell: wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -

- name: Add Google Chrome repo
  copy: src=files/apt/google-chrome dest=/etc/apt/sources.list.d/google-chrome.list owner=root group=root mode=644

- name: Add Google Hangouts repo
  copy: src=files/apt/google-talkplugin dest=/etc/apt/sources.list.d/google-talkplugin.list owner=root group=root mode=644

- name: Update apt cache
  apt: update_cache=yes

- name: Work around XDG "no writable system icon directory found" bug
  file: path={{ item }} state=directory
  with_items:
    - /usr/share/desktop-directories
    - /usr/share/icons/hicolor

- name: Install Google Chrome
  apt: pkg={{ item }} state=installed
  with_items:
    - google-chrome-stable
    - google-talkplugin

- name: Install dwm dependencies
  apt: pkg={{ item }} state=installed
  with_items:
    - build-essential
    - libx11-dev
    - libxinerama-dev
    - sharutils

- name: Update dwm
  git: repo=git://github.com/cdown/dwm.git dest=/usr/src/dwm-cdown update=yes

- name: Install dwm
  command: chdir=/usr/src/dwm-cdown make clean install

- name: Install desktop utilities
  apt: name={{ item }} state=present
  with_items:
    - suckless-tools
    - imagemagick
    - rxvt-unicode-256color

- name: Set up terminal fonts (Chris)
  apt: name=xfonts-terminus state=present

- name: Set up terminal fonts (Lin)
  apt: name=fonts-inconsolata state=present
  when: user == "lin"
